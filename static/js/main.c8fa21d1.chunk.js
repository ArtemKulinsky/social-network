/*! For license information please see main.c8fa21d1.chunk.js.LICENSE.txt */
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{128:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(36),r=n(3),a="ADD-MESSAGE",s={dialogs:[{id:1,name:"Grigoriy Kuznezov"},{id:2,name:"Nikolay Latkin"},{id:3,name:"Vladimir Tashinskiy"},{id:4,name:"Maksim Sokolov"},{id:5,name:"Elmira Abramova"},{id:6,name:"Artem Schiva"}],messages:[{id:1,message:"\u041f\u0440\u0438\u0432\u0435\u0442!",belong:"opponent"},{id:2,message:"\u042f \u0441\u0435\u0439\u0447\u0430\u0441 \u0437\u0430\u043d\u044f\u0442",belong:"user"},{id:3,message:"\u041a\u043e\u0433\u0434\u0430 \u0441\u043c\u043e\u0436\u0435\u0448\u044c?",belong:"opponent"},{id:4,message:"\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a",belong:"user"},{id:5,message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",belong:"opponent"},{id:6,message:"\u0425\u043e\u0440\u043e\u0448\u043e, \u043f\u043e\u043a\u0430!",belong:"user"},{id:7,message:"\u041f\u0440\u0438\u0432\u0435\u0442!",belong:"opponent"},{id:8,message:"\u042f \u0441\u0435\u0439\u0447\u0430\u0441 \u0437\u0430\u043d\u044f\u0442",belong:"user"},{id:9,message:"\u041a\u043e\u0433\u0434\u0430 \u0441\u043c\u043e\u0436\u0435\u0448\u044c?",belong:"opponent"},{id:10,message:"\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a",belong:"user"},{id:11,message:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",belong:"opponent"},{id:12,message:"\u0425\u043e\u0440\u043e\u0448\u043e, \u043f\u043e\u043a\u0430!",belong:"user"}]},i=function(e){return{type:a,newMessageBody:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:var n={id:e.messages.length+1,message:t.newMessageBody,belong:"user"},i=Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(o.a)(e.messages),[n])});return i;default:return e}}},134:function(e,t,n){e.exports={aside:"Aside_aside__3RdYS",friends:"Aside_friends__2JoVw",friend:"Aside_friend__2pu35",friendImage:"Aside_friendImage__2eF7y",friendName:"Aside_friendName__2bn9e"}},138:function(e,t,n){e.exports={item:"Post_item__2lpRt"}},139:function(e,t,n){e.exports={posts:"Posts_posts__3gQ2j"}},140:function(e,t,n){e.exports={statusForm:"StatusForm_statusForm__22aso"}},142:function(e,t,n){e.exports={selectedPage:"Paginator_selectedPage__39Hvh"}},143:function(e,t,n){e.exports={user:"User_user__3DM6v"}},144:function(e,t,n){e.exports={userFollowed:"FollowButton_userFollowed__lKMuO"}},145:function(e,t,n){e.exports={usersList:"UsersList_usersList__3MPxx",selectedPage:"UsersList_selectedPage__bQTsE"}},15:function(e,t,n){e.exports={form:"LoginForm_form__1cLTW",formContainer:"LoginForm_formContainer__3kXG2",inputField:"LoginForm_inputField__1dhtc",login:"LoginForm_login__30kx_",password:"LoginForm_password__haV4O",remember:"LoginForm_remember__O8fwi",submit:"LoginForm_submit__3SfZ7",formSummaryError:"LoginForm_formSummaryError__1H-Zb",captcha:"LoginForm_captcha__3bSOt",captchaDescription:"LoginForm_captchaDescription__Kmmpy",captchaImage:"LoginForm_captchaImage__38BqZ"}},180:function(e,t,n){},204:function(e,t,n){},304:function(e,t,n){e.exports={statusForm:"ProfileStatus_statusForm__1qAlV"}},305:function(e,t,n){e.exports={profileInformation:"Checkboxes_profileInformation__34iNq",avatar_field:"Checkboxes_avatar_field__26aqb",avatar_photo:"Checkboxes_avatar_photo__2ECPq",avatar_settings:"Checkboxes_avatar_settings__27vMX",avatar_changePhoto:"Checkboxes_avatar_changePhoto__TThvX",profileInformation__text:"Checkboxes_profileInformation__text__3p5pv",text_item:"Checkboxes_text_item__h-G2M",text__name:"Checkboxes_text__name__mm5SL"}},306:function(e,t,n){},307:function(e,t,n){"use strict";n.r(t),n.d(t,"rerenderEntireTree",(function(){return xn}));var o,r=n(1),a=n.n(r),s=n(66),i=n.n(s),c=n(11),u=n(38),l=n(39),f=n(41),d=n(40),m=n(9),p=n(17),b=n(7),j=(n(180),n(134)),g=n.n(j),h=n(71),_=n.n(h),O=n(0),x=function(e){return Object(O.jsxs)("div",{className:_.a.friend,children:[Object(O.jsx)("div",{className:_.a.friendImage,children:Object(O.jsx)("img",{})}),Object(O.jsx)("div",{className:_.a.friendName,children:e.name})]})},P=n(72),v=n.n(P),I=function(e){return Object(O.jsxs)("div",{className:v.a.friends,children:[Object(O.jsx)("div",{className:v.a.friendsTitle,children:"Friends"}),Object(O.jsx)("div",{className:v.a.friendsList,children:e.friends.map((function(e){return Object(O.jsx)(x,{name:e.name},e.id)}))})]})},w=n(73),F=n.n(w),N=function(e){return Object(O.jsx)("ul",{className:F.a.items,children:e.pages.map((function(e){return Object(O.jsx)("li",{className:F.a.item,children:Object(O.jsx)(p.b,{to:e.NavLink,activeClassName:F.a.active,children:e.name})},e.id)}))})},y=Object(b.d)(Object(c.b)((function(e){return{pages:e.asideReducer.pages,friends:e.asideReducer.friends}}),null))((function(e){return Object(O.jsxs)("aside",{className:g.a.aside,children:[Object(O.jsx)(N,{pages:e.pages}),Object(O.jsx)(I,{friends:e.friends})]})})),k=n(3),C=n(56),S=n.n(C),L=function(e){return Object(O.jsxs)("header",{className:S.a.header,children:[Object(O.jsx)("div",{className:S.a.loginContainer,children:Object(O.jsx)("div",{className:S.a.login,children:e.isAuth?e.login:Object(O.jsx)(p.b,{to:"/login",children:"Login"})})}),Object(O.jsx)("div",{className:S.a.logout,children:e.isAuth&&Object(O.jsx)("button",{onClick:e.LogoutUser,children:"Logout"})})]})},A=n(12),T=n.n(A),U=n(20),E=n(26),R=n(50),M=n.n(R),J=M.a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"6937657e-e964-4c15-9936-04c475fabf96"}}),D={getUsers:function(e,t){return J.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollowUser:function(e){return J.delete("follow/".concat(e)).then((function(e){return e.data}))},followUser:function(e){return J.post("follow/".concat(e)).then((function(e){return e.data}))}},z=function(){return J.get("auth/me").then((function(e){return e.data.data}))},V=function(e,t,n,o){return J.post("auth/login",{email:e,password:t,rememberMe:n,captcha:o})},q=function(){return J.delete("auth/login")},H=function(){return J.get("security/get-captcha-url")},G=function(e){return J.get("profile/".concat(e)).then((function(e){return e.data}))},B=function(e){return J.get("/profile/status/".concat(e))},X=function(e){return J.put("profile/status",{status:e})},K=function(e){return J.put("/profile/photo",e,{headers:{"API-KEY":"6937657e-e964-4c15-9936-04c475fabf96","Content-Type":"multipart/form-data"}})},Y=function(e){return J.put("/profile",e)},Q="SET_USER_DATA",W="RE_AUTH_USER",Z="SET_CAPTCHA_NEED",$={userId:null,email:null,login:null,captcha:{isNeed:!1,imageURL:null},isAuth:!1},ee=function(e,t,n,o){return{type:Q,data:{userId:e,email:t,login:n,isAuth:o}}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(k.a)(Object(k.a)({},e),t.data);case W:return Object(k.a)({},e);case Z:return Object(k.a)(Object(k.a)({},e),{},{captcha:{isNeed:!0,imageURL:t.imageURL}});default:return e}},ne=function(){return function(){var e=Object(U.a)(T.a.mark((function e(t){var n,o,r,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:(n=e.sent).login&&(o=n.id,r=n.email,a=n.login,t(ee(o,r,a,!0)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},oe=function(e,t,n,o){return function(){var r=Object(U.a)(T.a.mark((function r(a){var s,i;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,V(e,t,n,o);case 2:0===(s=r.sent).data.resultCode?a(ne()):10===s.data.resultCode?a(function(){var e=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:n=e.sent,t((o=n.data.url,{type:Z,imageURL:o}));case 4:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}()):(i=s.data.messages>0?s.data.messages[0]:"Some error",a(Object(E.a)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},re=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsx)(L,Object(k.a)({},this.props))}}]),n}(a.a.Component),ae=Object(b.d)(Object(c.b)((function(e){return{userId:e.auth.userId,email:e.auth.email,login:e.auth.login,isAuth:e.auth.isAuth}}),{LoginUser:oe,LogoutUser:function(){return function(){var e=Object(U.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:0===e.sent.data.resultCode&&t(ee(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(re),se=(n(204),n(129)),ie=n(130),ce=function(e){if(!e)return"Field is required"},ue=n(135),le=n(57),fe=n.n(le),de=function(e){return function(t){var n=t.input,o=t.meta,r=Object(ue.a)(t,["input","meta"]),a=o.error&&o.touched;return Object(O.jsxs)("div",{className:fe.a.textAreaContainer,children:[Object(O.jsx)(e,Object(k.a)(Object(k.a)(Object(k.a)({},n),r),{},{className:fe.a.textArea+" "+(a?fe.a.error:"")})),Object(O.jsx)("span",{className:fe.a.errorDescription,children:a?o.error:""})]})}},me=n(15),pe=n.n(me),be=de("input"),je=Object(ie.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,o=e.captcha;return Object(O.jsx)("div",{className:pe.a.formContainer,children:Object(O.jsxs)("form",{onSubmit:t,className:pe.a.form,children:[Object(O.jsx)("div",{className:pe.a.login+" "+pe.a.inputField,children:Object(O.jsx)(se.a,{validate:[ce],placeholder:"email",name:"email",component:be})}),Object(O.jsx)("div",{className:pe.a.password+" "+pe.a.inputField,children:Object(O.jsx)(se.a,{validate:[ce],placeholder:"password",name:"password",type:"password",component:be})}),n&&Object(O.jsx)("div",{className:pe.a.formSummaryError,children:n}),Object(O.jsxs)("label",{className:pe.a.remember,children:[Object(O.jsx)(se.a,{type:"checkbox",name:"rememberMe",id:"",component:"input"}),Object(O.jsx)("span",{children:"Remember me"})]}),o.isNeed&&Object(O.jsxs)("div",{className:pe.a.captcha,children:[Object(O.jsx)("p",{className:pe.a.captchaDescription,children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435, \u0447\u0442\u043e \u0432\u044b \u043d\u0435 \u0431\u043e\u0442"}),Object(O.jsx)("div",{className:pe.a.captchaImage,children:Object(O.jsx)("img",{src:o.imageURL})}),Object(O.jsx)(se.a,{type:"text",name:"captcha",component:"input",className:pe.a.inputField})]}),Object(O.jsx)("div",{className:pe.a.submit,children:Object(O.jsx)("button",{children:"Login"})})]})})})),ge=Object(b.d)(Object(c.b)((function(e){return{isAuth:e.auth.isAuth,captcha:e.auth.captcha}}),{LoginUser:oe}))((function(e){return e.isAuth?Object(O.jsx)(m.a,{to:"/profile"}):Object(O.jsxs)("main",{children:[Object(O.jsx)("h1",{children:"Login"}),Object(O.jsx)(je,{captcha:e.captcha,onSubmit:function(t){e.LoginUser(t.email,t.password,t.remembeMe,t.captcha)}})]})})),he=n(96),_e=n.n(he),Oe=n(138),xe=n.n(Oe),Pe=function(e){return Object(O.jsxs)("div",{className:xe.a.item,children:[Object(O.jsx)("img",{src:"http://lamcdn.net/furfurmag.ru/post_image-image/UVXRb-V4bbqu3mypKBCfgg-article.jpg"}),Object(O.jsx)("div",{className:"itemText",children:e.message}),Object(O.jsxs)("div",{children:["Likes: ",e.likesCount]})]})},ve=n(139),Ie=n.n(ve),we=function(e){return Object(O.jsx)("div",{className:Ie.a.posts,children:e.posts.map((function(e){return Object(O.jsx)(Pe,{message:e.message,likesCount:e.likesCount},e.id)})).reverse()})},Fe=n(97),Ne=n.n(Fe),ye=(o=50,function(e){if(e&&e.length>o)return"The maximum number of characters is ".concat(o)}),ke=de("textarea"),Ce=Object(ie.a)({form:"newPost"})((function(e){return Object(O.jsx)("div",{className:Ne.a.newPost,children:Object(O.jsxs)("form",{onSubmit:e.handleSubmit,className:Ne.a.newPostAddNews,children:[Object(O.jsx)(se.a,{name:"newPost",placeholder:"your news...",validate:[ce,ye],component:ke}),Object(O.jsx)("button",{children:"Send"})]})})})),Se=a.a.memo((function(e){return Object(O.jsxs)("section",{className:_e.a.myPosts,children:[Object(O.jsx)("h2",{className:_e.a.myPosts__title,children:e.isOwner?"My posts":"Posts"}),e.isOwner&&Object(O.jsx)(Ce,{onSubmit:function(t){e.addPost(t.newPost)}.bind(undefined),submitted:e.submitted}),Object(O.jsx)(we,{isOwner:e.isOwner,posts:e.myPosts.posts})]})})),Le=n(46),Ae=n.n(Le),Te=n(45),Ue=(n(304),n(140)),Ee=n.n(Ue),Re=Object(b.d)(Object(c.b)((function(e){return{initialValues:{status:e.profileReducer.status},enableReinitialize:!0}}),null),Object(ie.a)({form:"status"}))((function(e){return Object(O.jsxs)("form",{onSubmit:e.handleSubmit,className:Ee.a.statusForm,children:[Object(O.jsx)(se.a,{autoFocus:"true",type:"text",name:"status",id:"",component:"input"}),Object(O.jsx)("button",{type:"submit",children:"UpdateStatus"})]})})),Me=function(e){var t=Object(r.useState)(!1),n=Object(Te.a)(t,2),o=n[0],a=n[1];return Object(O.jsx)("div",{onDoubleClick:function(){return a(!0)},children:Object(O.jsxs)("span",{children:["Status:",o?Object(O.jsx)(Re,{status:e.status,setEditMode:a,onSubmit:function(t){e.updateProfileStatus(t.status,e.myId),a(!1)}}):e.status]})})},Je=n.p+"static/media/1473.0f0c7a6c.gif",De=function(){return Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:Je})})},ze=n(132),Ve=(n(305),function(e){return Object(O.jsxs)("fieldset",{children:[Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Yes"}),Object(O.jsx)("input",{name:"loogingForaJoB",value:"Yes",type:"radio",checked:e.LookingForAJobFormValue,onClick:function(){return e.change("lookingForAJob",!0)}})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"No"}),Object(O.jsx)("input",{name:"loogingForaJoB",value:"No",type:"radio",checked:!e.LookingForAJobFormValue,onClick:function(){return e.change("lookingForAJob",!1)}})]})]})}),qe=n(31),He=n.n(qe),Ge=function(e){return Object(O.jsxs)("div",{children:[e.contactTitlle,":",e.editMode?Object(O.jsx)(se.a,{name:e.contactTitlle,component:"input"}):e.contactValue]})},Be=Object(ze.a)("profileInformation"),Xe=Object(b.d)(Object(c.b)((function(e){return{LookingForAJobFormValue:Be(e,"lookingForAJob"),initialValues:{fullName:e.profileReducer.profileInformation.fullName,aboutMe:e.profileReducer.profileInformation.aboutMe,lookingForAJob:e.profileReducer.profileInformation.lookingForAJob,lookingForAJobDescription:e.profileReducer.profileInformation.lookingForAJobDescription,github:e.profileReducer.profileInformation.contacts.github,vk:e.profileReducer.profileInformation.contacts.vk,facebook:e.profileReducer.profileInformation.contacts.facebook,instagram:e.profileReducer.profileInformation.contacts.instagram,twitter:e.profileReducer.profileInformation.contacts.twitter,website:e.profileReducer.profileInformation.contacts.website,youtube:e.profileReducer.profileInformation.contacts.youtube,mainLink:e.profileReducer.profileInformation.contacts.mainLink},enableReinitialize:!0}}),null),Object(ie.a)({form:"profileInformation"}))((function(e){var t=Object(r.useState)(!1),n=Object(Te.a)(t,2),o=n[0],a=n[1];return Object(O.jsxs)("form",{onSubmit:e.handleSubmit,className:"".concat(He.a.profileInformation__text," ").concat(He.a.text),children:[Object(O.jsxs)("div",{className:He.a.text__name+" "+He.a.text_item,children:[e.profileInformation.fullName?e.profileInformation.fullName:"Noname",o&&Object(O.jsx)(se.a,{name:"fullName",component:"input"})]}),Object(O.jsxs)("div",{className:He.a.text_item,children:["About me:",o?Object(O.jsx)(se.a,{name:"aboutMe",component:"input"}):e.profileInformation.aboutMe]}),Object(O.jsxs)("div",{className:He.a.text_item,children:["Looking for a job:",o?Object(O.jsx)(se.a,{name:"lookingForAJob",change:e.change,component:Ve,LookingForAJobFormValue:e.LookingForAJobFormValue}):e.profileInformation.lookingForAJob?"Yes":"No"]}),Object(O.jsxs)("div",{className:He.a.text_item,children:["Professional skills:",o?Object(O.jsx)(se.a,{name:"lookingForAJobDescription",component:"input"}):e.profileInformation.lookingForAJobDescription]}),Object(O.jsxs)("div",{children:["Contacts:",Object.entries(e.profileInformation.contacts).map((function(e,t){return Object(O.jsx)(Ge,{contactTitlle:e[0],contactValue:e[1],editMode:o},t)}))]}),o?Object(O.jsx)("button",{onClick:function(){return a(!1)},type:"submit",children:"Update information"}):Object(O.jsx)("button",{onClick:function(e){e.preventDefault(),a(!0)},children:"Change information"})]})})),Ke=function(e){return Object(O.jsx)("img",{src:e.photos.large?e.photos.large:"https://www.film.ru/sites/default/files/filefield_paths/maxresdefault_1_24.jpg"})},Ye=function(e){return Object(O.jsxs)("section",{className:Ae.a.profileInformation,children:[Object(O.jsxs)("div",{className:Ae.a.avatar_field,children:[Object(O.jsx)("div",{className:Ae.a.avatar_photo,children:e.profilePhotoIsFetching?Object(O.jsx)(De,{}):Object(O.jsx)(Ke,{photos:e.profileInformation.photos,toggleProfilePhotoIsFetching:e.toggleProfilePhotoIsFetching})}),e.isOwner&&Object(O.jsx)("div",{className:Ae.a.avatar_settings,children:Object(O.jsx)("form",{className:Ae.a.avatar_changePhoto,children:Object(O.jsx)("input",{type:"file",onChange:function(t){if(t.target.files.length){var n=t.target.files[0];e.updateProfilePhotos(n)}}})})})]}),Object(O.jsx)(Xe,{onSubmit:function(t){var n={userId:e.myId,aboutMe:t.aboutMe,photos:{large:e.profileInformation.photos.large,small:e.profileInformation.photos.small},lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,fullName:t.fullName,contacts:{github:t.github,vk:t.vk,facebook:t.facebook,instagram:t.instagram,twitter:t.twitter,website:t.website,youtube:t.youtube,mainLink:t.mainLink}};e.updateProfileInf(n)},profileInformation:e.profileInformation}),Object(O.jsx)(Me,{myId:e.myId,status:e.status,updateProfileStatus:e.updateProfileStatus})]})},Qe=function(e){return e.isAuth?Object(O.jsxs)("div",{children:[Object(O.jsx)(Ye,{myId:e.myId,status:e.status,profileInformation:e.profileInformation,updateProfileStatus:e.updateProfileStatus,updateProfilePhotos:e.updateProfilePhotos,updateProfileInf:e.updateProfileInf,profilePhotoIsFetching:e.profilePhotoIsFetching,toggleProfilePhotoIsFetching:e.toggleProfilePhotoIsFetching,isOwner:e.isOwner}),Object(O.jsx)(Se,{addPost:e.addPost,updateNewPost:e.updateNewPost,myPosts:e.myPosts,isOwner:e.isOwner})]}):Object(O.jsx)(m.a,{to:"/login"})},We=n(75),Ze=n.n(We),$e=n(36),et=void 0,tt="CHANGE_FOLLOW",nt="SET_USERS",ot="SET_CURRENT_PAGE",rt="SET_TOTAL_USERS_COUNT",at="TOGGLE_IS_FETCHING",st="TOGGLE_FOLLOWING_IN_PROGRESS",it={users:[],maxPagesToShowCount:10,pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,isFollowingInProgress:[]},ct=function(e){return{type:tt,userId:e}},ut=function(e){return{type:ot,currentPage:e}},lt=function(){return{type:at}},ft=function(e,t){return{type:st,isFetching:e,userId:t}},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tt:return Object(k.a)(Object(k.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(k.a)(Object(k.a)({},e),{},{followed:!e.followed}):e}))});case nt:return Object(k.a)(Object(k.a)({},e),{},{users:Object($e.a)(t.users)});case ot:return Object(k.a)(Object(k.a)({},e),{},{currentPage:t.currentPage});case rt:return Object(k.a)(Object(k.a)({},e),{},{totalUsersCount:t.totalUsersCount});case at:return Object(k.a)(Object(k.a)({},e),{},{isFetching:!e.isFetching});case st:return Object(k.a)(Object(k.a)({},e),{},{isFollowingInProgress:t.isFetching?[].concat(Object($e.a)(e.isFollowingInProgress),[t.userId]):e.isFollowingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},mt=n(68),pt=n(141),bt=Object(pt.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),jt=function(e){return e.usersPage.maxPagesToShowCount},gt=function(e){return e.usersPage.pageSize},ht=function(e){return e.usersPage.totalUsersCount},_t=function(e){return e.usersPage.currentPage},Ot=function(e){return e.usersPage.isFetching},xt=function(e){return e.usersPage.isFollowingInProgress},Pt=n(142),vt=n.n(Pt),It=function(e){var t,n=Object(r.useState)(1),o=Object(Te.a)(n,2),a=o[0],s=o[1],i=Math.ceil(e.totalItemsCount/e.maxItemsCount);i&&(t=Math.min(e.maxPagesToShowCount,Math.max(i-a+1,1)));for(var c=[],u=a;u<a+t;u++)c.push(u);return Object(O.jsxs)("div",{children:[a>e.maxPagesToShowCount&&Object(O.jsx)("button",{onClick:function(){return t=e.maxPagesToShowCount,void s(Math.max(a-t,1));var t},children:"Prev"}),c.map((function(t){return Object(O.jsx)("span",{className:t===e.currentPage?vt.a.selectedPage:"",onClick:function(){e.onPageChanged(t)},children:t},t-1)})),i>=a+e.maxPagesToShowCount&&Object(O.jsx)("button",{onClick:function(){return t=e.maxPagesToShowCount,void s(Math.min(a+t,i));var t},children:"Next"})]})},wt=n(143),Ft=n.n(wt),Nt=n(32),yt=n.n(Nt),kt=function(e){return Object(O.jsxs)("section",{className:yt.a.userInf,children:[Object(O.jsxs)("div",{className:yt.a.headInf,children:[Object(O.jsx)("p",{className:yt.a.userFullName,children:e.user.name}),Object(O.jsx)("p",{className:yt.a.userStatus,children:e.user.status})]}),Object(O.jsxs)("div",{className:yt.a.userLocation,children:[Object(O.jsx)("p",{className:yt.a.userLocationCity,children:"props.userInf.location.city"}),Object(O.jsx)("p",{className:yt.a.userLocationCountry,children:"props.userInf.location.country"})]})]})},Ct=n(144),St=n.n(Ct),Lt=function(e){return Object(O.jsx)("button",{disabled:e.isFollowingInProgress.some((function(t){return t===e.id})),onClick:function(){e.changeFollow(e.id,e.followed)},className:St.a.userFollowed,children:e.followed?"folllow":"unfollow"})},At=n(98),Tt=n.n(At),Ut=function(e){return Object(O.jsxs)("section",{className:Tt.a.userPresent,children:[Object(O.jsx)(p.b,{to:"/profile/"+e.id,children:Object(O.jsx)("div",{className:Tt.a.userAvatar,children:Object(O.jsx)("img",{})})}),Object(O.jsx)(Lt,{id:e.id,followed:e.followed,changeFollow:e.changeFollow,isFollowingInProgress:e.isFollowingInProgress,toggleFollowingInProgress:e.toggleFollowingInProgress})]})},Et=function(e){return Object(O.jsxs)("div",{className:Ft.a.user,children:[Object(O.jsx)(Ut,{buttons:e.buttons,setButton:e.setButton,id:e.user.id,followed:e.user.followed,changeFollow:e.changeFollow,isFollowingInProgress:e.isFollowingInProgress,toggleFollowingInProgress:e.toggleFollowingInProgress}),Object(O.jsx)(kt,{user:e.user})]})},Rt=n(145),Mt=n.n(Rt),Jt=function(e){return Object(O.jsxs)("div",{className:Mt.a.usersList,children:[Object(O.jsx)(It,{totalItemsCount:e.totalUsersCount,maxPagesToShowCount:e.maxPagesToShowCount,maxItemsCount:e.pageSize,currentPage:e.currentPage,onPageChanged:e.onPageChanged}),e.users.map((function(t){return Object(O.jsx)(Et,{isFollowingInProgress:e.isFollowingInProgress,toggleFollowingInProgress:e.toggleFollowingInProgress,changeFollow:e.changeFollow,user:t},t.id)}))]})},Dt=Object(b.d)(Object(c.b)((function(e){return{users:bt(e),maxPagesToShowCount:jt(e),pageSize:gt(e),totalUsersCount:ht(e),currentPage:_t(e),isFetching:Ot(e),isFollowingInProgress:xt(e)}}),{changeFollow:function(e,t){return function(){var n=Object(U.a)(T.a.mark((function n(o){var r;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o(ft(!0,e)),r=t?D.unfollowUser.bind(et):D.followUser.bind(et),n.next=4,r(e);case 4:n.sent.resultCode||(o(ct(e)),o(ft(!1,e)));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},requestUsers:function(e,t){return function(){var n=Object(U.a)(T.a.mark((function n(o){var r;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o(lt()),n.next=3,D.getUsers(e,t);case 3:r=n.sent,o(lt()),o((s=r.items,{type:nt,users:s})),o((a=r.totalCount,{type:rt,totalUsersCount:a})),o(ut(e));case 8:case"end":return n.stop()}var a,s}),n)})));return function(e){return n.apply(this,arguments)}}()},setCurrentPage:ut}),mt.a)((function(e){var t=e.currentPage,n=e.pageSize;Object(r.useEffect)((function(){e.requestUsers(t,n)}),[t,n]);return Object(O.jsxs)(O.Fragment,{children:[e.isFetching?Object(O.jsx)(De,{}):null,Object(O.jsx)(Jt,{totalUsersCount:e.totalUsersCount,maxPagesToShowCount:e.maxPagesToShowCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:function(t){e.requestUsers(t,e.pageSize)},users:e.users,changeFollow:e.changeFollow,isFollowingInProgress:e.isFollowingInProgress})]})})),zt=function(e){return Object(O.jsxs)("section",{className:Ze.a.users,children:[Object(O.jsx)("div",{className:Ze.a.usersTitle,children:"Users"}),Object(O.jsx)("div",{className:Ze.a.usersBody,children:Object(O.jsx)(Dt,{})})]})},Vt="SET_INITIALIZE",qt={initialized:!1},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Vt:return Object(k.a)(Object(k.a)({},e),{},{initialized:!0});default:return e}},Gt="ADD-POST",Bt="SET_PROFILE_INFORMATION",Xt="SET_PROFILE_STATUS",Kt="DELETE_POST",Yt="SET_PROFILE_PHOTOS",Qt="TOGGLE_PROFILE_PHOTO_IS_FETCHING",Wt={profileInformation:{photos:{large:null,small:null,isFetching:!1},fullName:" ",aboutMe:null,lookingForAJob:null,lookingForAJobDescription:null,contacts:{github:null,vk:null,facebook:null,instagram:null,twitter:null,website:null,youtube:null,mainLink:null},id:null},status:"",myPosts:{posts:[{id:0,message:"Hi! How are you?",likesCount:1},{id:1,message:"Hi! What`s up?",likesCount:4},{id:2,message:"Hi, man!",likesCount:3},{id:3,message:"Would you lika a coup of cofeee?",likesCount:2}]}},Zt=function(e){return{type:Xt,status:e}},$t=function(e){return{type:Bt,profileInformation:e}},en=function(){return{type:Qt}},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gt:var n={id:e.myPosts.posts.length,message:t.newPostText,likesCount:0};return Object(k.a)(Object(k.a)({},e),{},{myPosts:Object(k.a)(Object(k.a)({},e.myPosts),{},{posts:[].concat(Object($e.a)(e.myPosts.posts),[n])})});case Kt:return Object(k.a)(Object(k.a)({},e),{},{myPosts:Object(k.a)(Object(k.a)({},e.myPosts),{},{posts:e.myPosts.posts.filter((function(e){return e.id!==t.postId}))})});case Bt:return Object(k.a)(Object(k.a)({},e),{},{profileInformation:Object(k.a)(Object(k.a)({},e.profileInformation),{},{photos:Object(k.a)(Object(k.a)({},e.profileInformation.photos),{},{large:t.profileInformation.photos.large,small:t.profileInformation.photos.small}),aboutMe:t.profileInformation.aboutMe,lookingForAJob:t.profileInformation.lookingForAJob,lookingForAJobDescription:t.profileInformation.lookingForAJobDescription,fullName:t.profileInformation.fullName,contacts:{github:t.profileInformation.contacts.github,vk:t.profileInformation.contacts.vk,facebook:t.profileInformation.contacts.facebook,instagram:t.profileInformation.contacts.instagram,twitter:t.profileInformation.contacts.twitter,website:t.profileInformation.contacts.website,youtube:t.profileInformation.contacts.youtube,mainLink:t.profileInformation.contacts.mainLink},id:t.profileInformation.userId})});case Xt:return Object(k.a)(Object(k.a)({},e),{},{status:t.status});case Yt:return Object(k.a)(Object(k.a)({},e),{},{profileInformation:Object(k.a)(Object(k.a)({},e.profileInformation),{},{photos:Object(k.a)(Object(k.a)({},e.profileInformation.photos),{},{large:t.images.large,small:t.images.small})})});case Qt:return Object(k.a)(Object(k.a)({},e),{},{profileInformation:Object(k.a)(Object(k.a)({},e.profileInformation),{},{photos:Object(k.a)(Object(k.a)({},e.profileInformation.photos),{},{isFetching:!e.profileInformation.photos.isFetching})})});default:return e}},nn=function(e){return e.profileReducer.profileInformation.photos},on=function(e){return e.profileReducer.profileInformation.photos.isFetching},rn=Object(b.d)(Object(c.b)((function(e){return{profileInformation:e.profileReducer.profileInformation,myPosts:e.profileReducer.myPosts,status:e.profileReducer.status,photos:nn(e),profilePhotoIsFetching:on(e),myId:e.auth.userId}}),{setProfile:function(e){return function(){var t=Object(U.a)(T.a.mark((function t(n){var o,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(en()),t.next=3,G(e);case 3:return o=t.sent,n($t(o)),t.next=7,B(e);case 7:r=t.sent,n(Zt(r.data)),n(en());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},addPost:function(e){return{type:Gt,newPostText:e}},updateProfileStatus:function(e){return function(){var t=Object(U.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(e);case 2:0===t.sent.data.resultCode&&n(Zt(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateProfilePhotos:function(e){var t=new FormData;return t.append("image",e),function(){var e=Object(U.a)(T.a.mark((function e(n){var o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(en()),e.next=3,K(t);case 3:0===(o=e.sent).data.resultCode&&n((r=o.data.data.photos,{type:Yt,images:r})),n(en());case 6:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()},toggleProfilePhotoIsFetching:en,updateProfileInf:function(e){return function(){var t=Object(U.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:0===t.sent.data.resultCode&&n($t(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),m.f,mt.a)((function(e){var t=e.match.params.userId,n=e.myId;return Object(r.useEffect)((function(){t?e.setProfile(t):e.setProfile(n)}),[t,n]),Object(O.jsx)(Qe,Object(k.a)(Object(k.a)({},e),{},{isOwner:!t}))})),an={pages:[{id:0,name:"Profile",NavLink:"/profile"},{id:1,name:"Messages",NavLink:"/dialogs"},{id:2,name:"News",NavLink:"/news"},{id:3,name:"Music",NavLink:"/music"},{id:4,name:"Setting",NavLink:"/settings"},{id:5,name:"Find Users",NavLink:"/users"}],friends:[{id:1,name:"Grigoriy Kuznezov"},{id:2,name:"Nikolay Latkin"},{id:3,name:"Vladimir Tashinskiy"},{id:4,name:"Maksim Sokolov"},{id:5,name:"Elmira Abramova"},{id:6,name:"Artem Schiva"}]},sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;return e},cn=n(128),un=n(146),ln=n(131),fn=Object(b.c)({auth:te,profileReducer:tn,dialogsReducer:cn.b,asideReducer:sn,usersPage:dt,form:ln.a,app:Ht}),dn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.d,mn=Object(b.e)(fn,dn(Object(b.a)(un.a)));window.axios=M.a;var pn=mn,bn=function(e){return Object(O.jsx)(r.Suspense,{fallback:Object(O.jsx)(De,{}),children:Object(O.jsx)(e,{})})},jn=a.a.lazy((function(){return n.e(3).then(n.bind(null,313))})),gn=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(O.jsxs)("div",{className:"wrapper",children:[Object(O.jsx)(ae,{}),Object(O.jsx)(y,{}),Object(O.jsxs)("main",{className:"content",children:[Object(O.jsx)(m.b,{path:"/profile/:userId?",render:function(){return Object(O.jsx)(rn,{})}}),Object(O.jsx)(m.b,{path:"/dialogs",render:function(){return bn(jn)}}),Object(O.jsx)(m.b,{path:"/news",component:Qe}),Object(O.jsx)(m.b,{path:"/music",component:Qe}),Object(O.jsx)(m.b,{path:"/settings",component:Qe}),Object(O.jsx)(m.b,{path:"/users",render:function(){return bn(zt)}}),Object(O.jsx)(m.b,{path:"/login",render:function(){return Object(O.jsx)(ge,{})}})]})]}):Object(O.jsx)(De,{})}}]),n}(a.a.Component),hn=Object(b.d)(m.f,Object(c.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=[];t.push(e(ne())),Promise.all(t).then((function(){e({type:Vt})}))}}}))(gn),_n=function(e){return Object(O.jsx)(p.a,{children:Object(O.jsx)(c.a,{store:pn,children:Object(O.jsx)(hn,{})})})},On=(n(306),function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,312)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),o(e),r(e),a(e),s(e)}))}),xn=function(e){i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(_n,{appState:e,dispatch:pn.dispatch.bind(pn)})}),document.getElementById("root"))};xn(pn.getState()),pn.subscribe((function(){xn(pn.getState())})),On()},31:function(e,t,n){e.exports={profileInformation:"ProfileInfForm_profileInformation__NFLpr",avatar_field:"ProfileInfForm_avatar_field__2pMhx",avatar_photo:"ProfileInfForm_avatar_photo__3Unih",avatar_settings:"ProfileInfForm_avatar_settings__1cH2f",avatar_changePhoto:"ProfileInfForm_avatar_changePhoto__13geT",profileInformation__text:"ProfileInfForm_profileInformation__text__2LEQc",text_item:"ProfileInfForm_text_item__3rX4V",text__name:"ProfileInfForm_text__name__1dzL6"}},32:function(e,t,n){e.exports={userInf:"UserInf_userInf__ahEMP",headInf:"UserInf_headInf__tQygY",userFullName:"UserInf_userFullName__gfwWz",userStatus:"UserInf_userStatus__1tOoN",userLocation:"UserInf_userLocation__1Vmek",userLocationCity:"UserInf_userLocationCity__1GHLr",userLocationCountry:"UserInf_userLocationCountry__2Fue2"}},46:function(e,t,n){e.exports={profileInformation:"ProfileInformation_profileInformation__1Vf5q",avatar_field:"ProfileInformation_avatar_field__1h20q",avatar_photo:"ProfileInformation_avatar_photo__KX_I1",avatar_settings:"ProfileInformation_avatar_settings__3QrP3",avatar_changePhoto:"ProfileInformation_avatar_changePhoto__chop6",profileInformation__text:"ProfileInformation_profileInformation__text__20VHi",text__name:"ProfileInformation_text__name__2E3J9"}},56:function(e,t,n){e.exports={header:"Header_header__YMBtf",loginContainer:"Header_loginContainer__1T8h8",login:"Header_login__qXReK",logout:"Header_logout__29yXe"}},57:function(e,t,n){e.exports={textAreaContainer:"FormsControls_textAreaContainer__2wm6S",textArea:"FormsControls_textArea__3d2qV",error:"FormsControls_error__1zw1d",errorDescription:"FormsControls_errorDescription__198kT"}},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o=n(3),r=n(38),a=n(39),s=n(41),i=n(40),c=n(1),u=n.n(c),l=n(11),f=n(9),d=n(0),m=function(e){return{isAuth:e.auth.isAuth}},p=function(e){var t=function(t){Object(s.a)(c,t);var n=Object(i.a)(c);function c(){return Object(r.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return this.props.isAuth?Object(d.jsx)(e,Object(o.a)({},this.props)):Object(d.jsx)(f.a,{to:"/login"})}}]),c}(u.a.Component);return Object(l.b)(m)(t)}},71:function(e,t,n){e.exports={friend:"Friend_friend__5lk9k",friendImage:"Friend_friendImage__22-4a",friendName:"Friend_friendName__1ENaX"}},72:function(e,t,n){e.exports={friends:"Friends_friends__2JaJ0",friendsList:"Friends_friendsList__E7lKC",friendsTitle:"Friends_friendsTitle__3xhBu"}},73:function(e,t,n){e.exports={items:"Pages_items__QD1Bw",item:"Pages_item__3FOZQ",active:"Pages_active__3hpdX"}},75:function(e,t,n){e.exports={users:"Users_users__25S7h",usersTitle:"Users_usersTitle__2x_ro",usersBody:"Users_usersBody__24JOe"}},96:function(e,t,n){e.exports={myPosts:"MyPosts_myPosts__3StTK",myPosts__title:"MyPosts_myPosts__title__3cw_Y"}},97:function(e,t,n){e.exports={myPosts__addNews:"NewPost_myPosts__addNews__1VDdW",newPostAddNews:"NewPost_newPostAddNews__1yNFC"}},98:function(e,t,n){e.exports={userPresent:"UserPresent_userPresent__1I9MT",userAvatar:"UserPresent_userAvatar__2A63N",userFollowed:"UserPresent_userFollowed__1qnrd"}}},[[307,1,2]]]);
//# sourceMappingURL=main.c8fa21d1.chunk.js.map